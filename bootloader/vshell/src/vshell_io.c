/**
*******************************************************************************************************
*			 			 					shell命令字符接收发送								 
*                      			 (c) Copyright 2013-2020, xxx公司, 广州
*                              				All Rights Reserved
*  									   	
* 
* @文件名	vshell_io.h
* @作者  		 
* @版本 	V1.0
* @日期    	2017-09-06
* @说明   	shell变量类型相关声明
*******************************************************************************************************
* @注意事项
*
*******************************************************************************************************
* @修改记录
*
*******************************************************************************************************
*/
/* Includes -----------------------------------------------------------------------------------------*/
#include "vshell_io.h"

/*
*********************************************************************************************************
*                                        shell字符输出
*
* 描述  : 输出一个字符串
*
* 参数  : c		字符	
*
* 返回值: 输出的字符
*
* 备注  : 无	
*********************************************************************************************************
*/
char vshell_putchar(char c)
{
	if(c == '\n')
		vshell_putc('\r');
	if(c == '\b')
	{
		vshell_putc('\b');
		vshell_putc(' ');
	}
	vshell_putc(c);
	return c;
} 

/*
*********************************************************************************************************
*                                        shell获取一个字符
*
* 描述  : 通过串口接收一个字符
*
* 参数  : 无	
*
* 返回值: 接收到的字符
*
* 备注  : 无	
*********************************************************************************************************
*/
char vshell_getchar(void)
{
	char c;
	c = vshell_getc();
	if(c == '\r')
		return  '\n';
	return c;
}

/*
*********************************************************************************************************
*                                        shell输出一个字符串
*
* 描述  :通过串口输出一个字符串
*
* 参数  : s		字符串的地址	
*
* 返回值: 0		输出成功
*
* 备注  : 无	
*********************************************************************************************************
*/
char vshell_puts(const char *s)
{
	while(*s)
		vshell_putchar(*s++);
	vshell_putchar('\n');
	return 0;
}

/*
*********************************************************************************************************
*                                        shell获取字符串
*
* 描述  : 通过串口接收到相应的字符串，对字符串进行解析判断。
*
* 参数  : s		缓存字符串地址
*
* 返回值: 缓存地址
*
* 备注  : 无	
*********************************************************************************************************
*/
char *vshell_gets(char *s)
{
	char *p = s;  
	while((*p = vshell_getchar()) != '\n')
	{
		if(*p != '\b')
			vshell_putchar(*p++);
		else
			if(p > s)
				vshell_putchar(*p--);
	}
	*p = '\0';
	vshell_putchar('\n');
	return s;
}



